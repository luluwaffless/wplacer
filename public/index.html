<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="icons/favicon.png">
    <link rel="stylesheet" href="styles/index.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>wplacer</title>
</head>
<body>
    <div class="container">
        <h1><img src="icons/favicon.png">wplacer</h1>

        <div id="main">
            <button id="openManageUsers" class="primary-button"><img src="icons/manageUsers.svg">Manage Users</button>
            <button id="openAddTemplate" class="primary-button"><img src="icons/addTemplate.svg">Add Template</button>
            <button id="openManageTemplates" class="primary-button"><img src="icons/manageTemplates.svg">Manage Templates</button>
            <button id="openSettings" class="primary-button"><img src="icons/settings.svg">Settings</button>
            <button id="openLiveLogs" class="secondary-button"><img src="icons/code.svg">Live Logs</button>
        </div>

        <div id="manageUsers" style="display: none;">
            <h2>Add/Manage Users</h2>
            <form id="userForm">
                <label for="jcookie">JWT Cookie (j)</label>
                <input type="password" id="jcookie" required>
                <label for="scookie">Session Cookie (s) [optional]</label>
                <input type="password" id="scookie">
                <button type="submit" id="submitUser" class="primary-button"><img src="icons/addUser.svg">Add User</button>
            </form>

            <h2 class="section-title" id="manageUsersTitle">Existing Users</h2>
            <div id="chargeSummary">
                <b>Total Available Charges:</b> <span id="totalCharges">?</span> |
                <b>Total Max Charges:</b> <span id="totalMaxCharges">?</span>
            </div>
            <button id="checkUserStatus" class="primary-button"><img src="icons/check.svg">Check Account Status</button>
            <div id="userList"></div>

            <button onclick="changeTab(main);" class="secondary-button"><img src="icons/return.svg">Return</button>
        </div>

        <div id="addTemplate" style="display: none;">
            <h2 id="templateFormTitle">Add Template</h2>
            <button id="convert" class="primary-button" onclick="document.getElementById('convertInput').click()"><img src="icons/convert.svg">Convert Image</button>
            <div id="details" style="display: none;">
                <b>Size:</b> <span id="size"></span> | <b>Charges needed:</b> <span id="ink"></span>
                <canvas id="templateCanvas"></canvas>
                <button id="previewCanvasButton" class="secondary-button">Preview Canvas</button>
                <canvas id="previewCanvas"></canvas>
            </div>
            <form id="templateForm">
                <input type="file" style="display: none;" accept="image/png" id="convertInput">
                <label for="templateName">Template Name</label>
                <input type="text" id="templateName" placeholder="Insert a catchy name here" required>
                <label>Coordinates</label>
                <div class="setting-toggle">
                    <label for="coordinateMode">Enable coordinate mode</label>
                    <label class="switch">
                        <input id="coordinateMode" name="coordinateMode" type="checkbox">
                        <span class="slider"></span>
                    </label>
                </div>
                <label for="xCoord">X Coordinate</label>
                <input type="number" id="xCoord" placeholder="0" min="0" max="2000" step="1">
                <label for="yCoord">Y Coordinate</label>
                <input type="number" id="yCoord" placeholder="0" min="0" max="2000" step="1">
                <label for="delayTime">Delay (seconds)</label>
                <input type="number" id="delayTime" placeholder="0" min="0" max="3600" step="1">
                <label>Priority</label>
                <select id="prioritySelect">
                    <option value="1">1 - Highest</option>
                    <option value="2">2 - High</option>
                    <option value="3" selected>3 - Normal</option>
                    <option value="4">4 - Low</option>
                    <option value="5">5 - Lowest</option>
                </select>
                <button type="submit" id="addTemplateSubmit" class="primary-button"><img src="icons/addTemplate.svg">Add Template</button>
            </form>
            <button onclick="changeTab(main);" class="secondary-button"><img src="icons/return.svg">Return</button>
        </div>

        <div id="manageTemplates" style="display: none;">
            <h2>Manage Templates</h2>
            <div class="template-actions-all">
                <button id="checkAll" class="secondary-button">Check All</button>
                <button id="uncheckAll" class="secondary-button">Uncheck All</button>
                <button id="reverseAll" class="secondary-button">Reverse All</button>
                <button id="removeSelected" class="secondary-button"><img src="icons/remove.svg">Remove Selected</button>
                <button id="downloadSelected" class="secondary-button"><img src="icons/download.svg">Download Selected</button>
            </div>
            <div id="templateList"></div>
            <button onclick="changeTab(main);" class="secondary-button"><img src="icons/return.svg">Return</button>
        </div>

        <div id="settings" style="display: none;">
            <h2>Settings</h2>

            <div class="setting-toggle">
                <label for="onlyDrawMissingPixels">Only draw missing pixels</label>
                <label class="switch">
                    <input id="onlyDrawMissingPixels" name="onlyDrawMissingPixels" type="checkbox">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <label for="hideTemplates">Hide templates</label>
                <label class="switch">
                    <input id="hideTemplates" name="hideTemplates" type="checkbox">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <label for="autoZoom">Auto zoom-in when placing</label>
                <label class="switch">
                    <input id="autoZoom" name="autoZoom" type="checkbox">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <label for="autoStart">Auto-start on page load</label>
                <label class="switch">
                    <input id="autoStart" name="autoStart" type="checkbox">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="setting-toggle">
                <label for="soundEnabled">Enable sound notifications</label>
                <label class="switch">
                    <input id="soundEnabled" name="soundEnabled" type="checkbox">
                    <span class="slider"></span>
                </label>
            </div>

            <label for="drawingModeSelect">Drawing Mode</label>
            <select id="drawingModeSelect">
                <option value="linear">Top to Bottom</option>
                <option value="linear-reversed">Bottom to Top</option>
                <option value="linear-ltr">Left to Right</option>
                <option value="linear-rtl">Right to Left</option>
                <option value="singleColorRandom">Random Color</option>
                <option value="colorByColor">Color by Color</option>
            </select>

            <div class="setting-toggle">
                <label for="outlineMode">Enable outline mode</label>
                <label class="switch">
                    <input id="outlineMode" name="outlineMode" type="checkbox">
                    <span class="slider"></span>
                </label>
            </div>
            <div class="setting-toggle">
                <label for="turnstileNotifications">Enable desktop notifications for Turnstile</label>
                <label class="switch">
                    <input id="turnstileNotifications" name="turnstileNotifications" type="checkbox">
                    <span class="slider"></span>
                </label>
            </div>

            <label for="accountCooldown">Account Turn Cooldown (seconds)</label>
            <input type="number" id="accountCooldown" min="0" value="20">
            <label for="purchaseCooldown">Purchase Cooldown (seconds)</label>
            <input type="number" id="purchaseCooldown" min="0" value="5">
            <label for="dropletReserve">Minimum Droplets Before Buying</label>
            <input type="number" id="dropletReserve" min="0" value="0">
            <label for="antiGriefStandby">Anti-Grief Standby Time (minutes)</label>
            <input type="number" id="antiGriefStandby" min="1" value="10">
            <label for="chargeThreshold">Charge Threshold (%)</label>
            <input type="number" id="chargeThreshold" min="0" max="100" value="50">

            <button onclick="changeTab(main);" class="secondary-button"><img src="icons/return.svg">Return</button>
        </div>

        <div id="liveLogs" style="display: none;">
            <h2>Live Logs</h2>
            <div class="template-actions-all">
                <button id="toggleAutoScroll" class="secondary-button">Auto-Scroll: On</button>
                <button id="clearLogs" class="secondary-button"><img src="icons/remove.svg">Clear</button>
            </div>
            <pre id="logsOutput" style="max-height: 240px; overflow: auto; background: #111; color: #ddd; padding: 10px; border-radius: 6px;"></pre>
            <button onclick="changeTab(main);" class="secondary-button"><img src="icons/return.svg">Return</button>
        </div>

        <p class="credits">Made by <a href="https://github.com/luluwaffless">luluwaffless <img src="icons/github.svg"></a> and <a href="https://github.com/JinxTheCatto">Jinx <img src="icons/github.svg"></a></p>
    </div>

    <div id="messageBoxOverlay" class="hidden">
        <div id="messageBox">
            <h3 id="messageBoxTitle"></h3>
            <p id="messageBoxContent"></p>
            <div class="message-box-buttons">
                <button id="messageBoxCancel" class="secondary-button">Cancel</button>
                <button id="messageBoxConfirm" class="primary-button">OK</button>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="scripts/index.js"></script>
</body>
</html>